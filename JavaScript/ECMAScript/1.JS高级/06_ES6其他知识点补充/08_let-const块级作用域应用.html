<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<button>按钮0</button>
		<button>按钮1</button>
		<button>按钮2</button>
		<button>按钮3</button>

		<script>
			// 1.形成的词法环境
			// var message = "Hello World"
			// var age = 18
			// function foo() {}
			// let address = "广州市"

			// {
			//   var height = 1.88

			//   let title = "教师"
			//   let info = "了解真相~"
			// }

			// 2.监听按钮的点击
			const btnEls = document.querySelectorAll("button");
			// 0、问题
			// for (var i = 0; i < btnEls.length; i++) {
			// 	var btnEl = btnEls[i];

			// 	btnEl.onclick = function () {
			// 		console.log(`点击了${i}按钮`); //点击按钮，去外层作用域找i，var 不形成作用域，就找到window的i
			// 	};
			// }

			// 1、将索引通过属性储存到对象上
			// for (var i = 0; i < btnEls.length; i++) {
			// 	var btnEl = btnEls[i];
			// 	btnEl.index = i;

			// 	btnEl.onclick = function () {
			// 		console.log(`点击了${this.index}按钮`); //点击按钮
			// 	};
			// }

			// 2、使用闭包，通过函数作用域，AO储存索引，解决
			// for (var i = 0; i < btnEls.length; i++) {
			// 	var btnEl = btnEls[i];
			// 	(function (m) {
			// 		btnEl.onclick = function () {
			// 			console.log(`点击了${m}按钮`);// 通过作用域链获取m
			// 		};
			// 	})(i); // 函数执行，创建执行上下文，关联AO对象（或es6的词法环境），形成作用域，储存变量或方法，
			// }

			// 3、通过let作用域解决
			for (let i = 0; i < btnEls.length; i++) {
				const btnEl = btnEls[i];
				btnEl.onclick = function () {
					console.log(`点击了${i}按钮`); // 通过作用域链找i,let 形成了作用域，有自己的词法环境，所有数据正常
				};
			}

			// console.log(i)
		</script>
	</body>
</html>
