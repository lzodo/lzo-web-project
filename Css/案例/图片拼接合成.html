<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Document</title>
</head>

<body>
	<div class="container">
		<!-- <div class="blocks"></div> -->
	</div>
</body>
<script>
	let banner = document.querySelector('.container');
	let blocks = document.getElementsByClassName('blocks') // 这样可以获取动态变化的blocks

	let rowCount = 100 / 5;// 计算每行分几个
	window.onload = function () {
		// 计算第每一块的宽高
		let positionX = banner.offsetWidth / rowCount
		let positionY = banner.offsetHeight / rowCount;
		for (let i = 0; i < 400; i++) {
			// 计算第i个是第几行
			let rowIndex = Math.floor(i / rowCount);

			banner.innerHTML += `<div class='blocks'></div`;
			blocks[i].style.animationDelay = `${i * 0.05}s`

			blocks[i].style.backgroundPosition = `-${(i * positionX).toFixed(6) - rowIndex * positionX * rowCount}px -${rowIndex * positionY}px`
		}
	}
</script>
<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	html,
	body {
		width: 100%;
		height: 100%;
		background-color: #111;
	}

	/* 容器 */
	.container {
		position: absolute;
		left: 0;
		top: 0;
		height: 100%;
		width: 100%;
		display: flex;
		flex-wrap: wrap;
		overflow: hidden;
		perspective: 500px;
	}

	.container .blocks {
		width: 5vw;
		height: 5vh;
		background: url(../../static/image/bg4.jpg);
		background-size: 1707px 942px;
		opacity: 0;
		animation: animate 0.75s ease-in-out forwards;
	}

	.container .blocks:nth-child(even) {
		animation: animate 1s ease-in-out forwards;
	}

	.container .blocks:nth-child(7n+3) {
		animation: animate 1.5s ease-in-out forwards;
	}

	@keyframes animate {
		0% {
			opacity: 0;
			border-radius: 30px;
			transform: scale(0) translateY(1000px);
			filter: grayscale(1);
		}

		50% {
			opacity: 1;
			border-radius: 30px;
			filter: grayscale(1);
		}

		100% {
			opacity: 1;
			transform: scale(1) translateY(0px);
			border-radius: 0px;
			filter: grayscale(0);
		}
	}
</style>

</html>